---
version: 2
interactions:
    - id: 0
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"applications":[{"id":"baca7695-fe4e-48eb-8f24-e479c20ca3a6", "name":"terraform-provider", "description":"", "created_at":"2022-12-01T12:58:00.035298Z", "updated_at":"2022-12-01T12:58:00.035298Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"609bfa7f-1618-4eb4-af4b-cfc7b54f03cb", "name":"Ansible community.scaleway", "description":"", "created_at":"2023-02-24T14:21:49.615888Z", "updated_at":"2023-02-24T14:21:49.615888Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"d2f56973-8e47-428b-bb2d-b8a61c5b6626", "name":"github-actions_action-scw", "description":"Define an application that will be used to test https://github.com/scaleway/action-scw. This application should not have any policy, token can leak as used in dependabot CI.", "created_at":"2024-07-01T11:31:17.893521Z", "updated_at":"2024-07-01T11:35:43.476060Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"ffe505fb-7a30-44bc-9fa2-d314cebc0d3c", "name":"test-acc-scaleway-iam-app-5423146701528325636", "description":"", "created_at":"2025-06-09T01:19:16.510583Z", "updated_at":"2025-06-09T01:19:16.510583Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"9a0fcb86-9c8a-45cb-8c17-b3cd5679fc9c", "name":"test-acc-scaleway-iam-app-8827643338955706267", "description":"", "created_at":"2025-06-16T01:18:38.430759Z", "updated_at":"2025-06-16T01:18:38.430759Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}], "total_count":5}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/applications?order_by=created_at_asc&organization_id=11111111-1111-1111-1111-111111111111&page=1
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 1876
        uncompressed: false
        body: '{"applications":[{"id":"baca7695-fe4e-48eb-8f24-e479c20ca3a6", "name":"terraform-provider", "description":"", "created_at":"2022-12-01T12:58:00.035298Z", "updated_at":"2022-12-01T12:58:00.035298Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"609bfa7f-1618-4eb4-af4b-cfc7b54f03cb", "name":"Ansible community.scaleway", "description":"", "created_at":"2023-02-24T14:21:49.615888Z", "updated_at":"2023-02-24T14:21:49.615888Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"d2f56973-8e47-428b-bb2d-b8a61c5b6626", "name":"github-actions_action-scw", "description":"Define an application that will be used to test https://github.com/scaleway/action-scw. This application should not have any policy, token can leak as used in dependabot CI.", "created_at":"2024-07-01T11:31:17.893521Z", "updated_at":"2024-07-01T11:35:43.476060Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"ffe505fb-7a30-44bc-9fa2-d314cebc0d3c", "name":"test-acc-scaleway-iam-app-5423146701528325636", "description":"", "created_at":"2025-06-09T01:19:16.510583Z", "updated_at":"2025-06-09T01:19:16.510583Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}, {"id":"9a0fcb86-9c8a-45cb-8c17-b3cd5679fc9c", "name":"test-acc-scaleway-iam-app-8827643338955706267", "description":"", "created_at":"2025-06-16T01:18:38.430759Z", "updated_at":"2025-06-16T01:18:38.430759Z", "organization_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "nb_api_keys":1, "tags":[]}], "total_count":5}'
        headers:
            Content-Length:
                - "1876"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Wed, 06 Aug 2025 15:47:16 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - d41880f6-83e3-4ec6-a06c-5064b4f1820e
        status: 200 OK
        code: 200
        duration: 355.010259ms
    - id: 1
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"api_keys":[{"access_key":"SCW9GYPGY01AJ939C94F", "secret_key":null, "description":"", "created_at":"2022-12-01T13:01:34.201310Z", "updated_at":"2022-12-01T13:01:34.201310Z", "expires_at":null, "default_project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "creation_ip":"51.159.73.9", "application_id":"baca7695-fe4e-48eb-8f24-e479c20ca3a6"}], "total_count":1}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/api-keys?bearer_id=baca7695-fe4e-48eb-8f24-e479c20ca3a6&bearer_type=unknown_bearer_type&order_by=created_at_asc&organization_id=11111111-1111-1111-1111-111111111111&page=1
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 412
        uncompressed: false
        body: '{"api_keys":[{"access_key":"SCW9GYPGY01AJ939C94F", "secret_key":null, "description":"", "created_at":"2022-12-01T13:01:34.201310Z", "updated_at":"2022-12-01T13:01:34.201310Z", "expires_at":null, "default_project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "creation_ip":"51.159.73.9", "application_id":"baca7695-fe4e-48eb-8f24-e479c20ca3a6"}], "total_count":1}'
        headers:
            Content-Length:
                - "412"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Wed, 06 Aug 2025 15:47:16 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 74c36b3f-60bd-4731-b5c2-d0da62d5ebc9
        status: 200 OK
        code: 200
        duration: 143.592027ms
    - id: 2
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"access_key":"SCW9GYPGY01AJ939C94F", "secret_key":null, "description":"", "created_at":"2022-12-01T13:01:34.201310Z", "updated_at":"2022-12-01T13:01:34.201310Z", "expires_at":null, "default_project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "creation_ip":"51.159.73.9", "application_id":"baca7695-fe4e-48eb-8f24-e479c20ca3a6"}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/api-keys/SCW9GYPGY01AJ939C94F
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 380
        uncompressed: false
        body: '{"access_key":"SCW9GYPGY01AJ939C94F", "secret_key":null, "description":"", "created_at":"2022-12-01T13:01:34.201310Z", "updated_at":"2022-12-01T13:01:34.201310Z", "expires_at":null, "default_project_id":"105bdce1-64c0-48ab-899d-868455867ecf", "editable":true, "deletable":true, "managed":false, "creation_ip":"51.159.73.9", "application_id":"baca7695-fe4e-48eb-8f24-e479c20ca3a6"}'
        headers:
            Content-Length:
                - "380"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Wed, 06 Aug 2025 15:47:16 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - fd50183e-3b76-426d-b6c1-8aa91f9dab4f
        status: 200 OK
        code: 200
        duration: 155.438846ms
    - id: 3
      request:
        proto: HTTP/1.1
        proto_major: 1
        proto_minor: 1
        content_length: 0
        transfer_encoding: []
        trailer: {}
        host: api.scaleway.com
        remote_addr: ""
        request_uri: ""
        body: '{"policies":[], "total_count":0}'
        form: {}
        headers:
            User-Agent:
                - scaleway-sdk-go/v1.0.0-beta.7+dev (go1.24.1; linux; amd64) cli-e2e-test
        url: https://api.scaleway.com/iam/v1alpha1/policies?application_ids=baca7695-fe4e-48eb-8f24-e479c20ca3a6&order_by=policy_name_asc&organization_id=11111111-1111-1111-1111-111111111111&page=1
        method: GET
      response:
        proto: HTTP/2.0
        proto_major: 2
        proto_minor: 0
        transfer_encoding: []
        trailer: {}
        content_length: 32
        uncompressed: false
        body: '{"policies":[], "total_count":0}'
        headers:
            Content-Length:
                - "32"
            Content-Security-Policy:
                - default-src 'none'; frame-ancestors 'none'
            Content-Type:
                - application/json
            Date:
                - Wed, 06 Aug 2025 15:47:16 GMT
            Server:
                - Scaleway API Gateway (fr-par-1;edge03)
            Strict-Transport-Security:
                - max-age=63072000
            X-Content-Type-Options:
                - nosniff
            X-Frame-Options:
                - DENY
            X-Request-Id:
                - 8cdc2380-9474-448d-bd42-8990c4a818fa
        status: 200 OK
        code: 200
        duration: 164.201849ms
